"use strict";var Nauper={version:"0.1pa"};
"use strict";var __nativeST__=window.setTimeout,__nativeSI__=window.setInterval;window.setTimeout=function(t,n){var i=this,e=Array.prototype.slice.call(arguments,2);return __nativeST__(t instanceof Function?function(){t.apply(i,e)}:t,n)},window.setInterval=function(t,n){var i=this,e=Array.prototype.slice.call(arguments,2);return __nativeSI__(t instanceof Function?function(){t.apply(i,e)}:t,n)};
"use strict";var getTextHeight=function(t){var e=document.createElement("p"),n=0;return e.style.font=t,e.style.position="relative",e.style.zIndex="-1",e.innerHTML="Test",document.body.appendChild(e),n=e.offsetHeight,document.body.removeChild(e),n},wrapText=function(t,e,n,r){var i=e.split(" "),u="",s=getTextHeight(n),o=0,a=[];return i.forEach(function(e,n){o=""===u?t.measureText(e).width:t.measureText(u+" "+e).width,o>r?(a.push(u),u=e):o===r?(a.push(u+" "+e),u=""):o<r&&(u=u?u+" "+e:e,n+1===i.length&&a.push(u))}),{result:a,height:s}},getTextOffset=function(t,e,n){var r=t.measureText(n).width,i=.5*e.width,u=.5*r,s=i-u;return s},putDefaults=function(t,e){var n=Object.getOwnPropertyNames(t),r={};return n.forEach(function(n){void 0===e||void 0===e[n]?r[n]=t[n]:void 0!==e[n]&&(r[n]=e[n])}),r},copyObject=function(t){var e={};return e=putDefaults(t,{})},getWindowSize=function(){var t={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight};return t.coff=t.width/t.height,t},convertHexIntoRGBA=function(t,e){var n=t.replace("#",""),r={};return 3===n.length?(r.r=parseInt(n.substring(0,1),16),r.g=parseInt(n.substring(1,2),16),r.b=parseInt(n.substring(2,3),16)):6===n.length&&(r.r=parseInt(n.substring(0,2),16),r.g=parseInt(n.substring(2,4),16),r.b=parseInt(n.substring(4,6),16)),"rgba("+r.r+", "+r.g+", "+r.b+", "+e+")"},makeRequest=function(t,e){var n=new XMLHttpRequest;n.open("GET",t,!0),n.addEventListener("readystatechange",function(){e(n)}),n.send()},makeRequestSync=function(t,e){var n=new XMLHttpRequest;n.open("GET",t,!1),n.send(),e(n)};
"use strict";Nauper.UI=function(e){this.engine=e,this.hideTextBox=function(){this.engine.sayBox.style.display="none"}.bind(this),this.showTextBox=function(){this.engine.sayBox.style.display="block"}.bind(this)},Nauper.UI.prototype.drawQuestion=function(e){var t=this;e.forEach(function(e,i){var n=document.createElement("div"),o=document.createElement("p");o.classList.add("inactiveQuestionText"),o.innerHTML=e.text,n.classList.add("inactiveQuestionBox"),n.appendChild(o),n.style.top=String(25*i)+"%",document.body.appendChild(n),n.addEventListener("mouseover",function(){n.classList.remove("inactiveQuestionBox"),n.classList.add("activeQuestionBox"),o.classList.remove("inactiveQuestionText"),o.classList.add("activeQuestionText")}),n.addEventListener("mouseout",function(){n.classList.remove("activeQuestionBox"),n.classList.add("inactiveQuestionBox"),o.classList.remove("activeQuestionText"),o.classList.add("inactiveQuestionText")}),n.addEventListener("click",function(){t.engine.redirect(e.address)})})},Nauper.UI.prototype.clearQuestion=function(){var e=document.querySelectorAll(".inactiveQuestionBox, .activeQuestionBox");e.forEach(function(e){e.remove()})},Nauper.UI.prototype.hideCharacters=function(){for(var e=document.querySelectorAll(".character"),t=0;t<e.length;t+=1)e[t].style.display="none"},Nauper.UI.prototype.setBackground=function(e){document.body.style.backgroundImage='url("'+e+'")'},Nauper.UI.prototype.fade=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#000",t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ease",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2e3,o=document.getElementsByTagName("html")[0];o.style.transitionDuration=String(n)+"ms",o.style.transitionTimingFunction=i,o.style.backgroundColor=e,o.style.opacity="0",setTimeout(function(){t.engine.click(),o.style.opacity="1"},n)};
"use strict";Nauper.Sound=function(n){this.engine=n};
"use strict";Nauper.Engine=function(){this.UI=new Nauper.UI(this),this.elements=[],this.notSkip=["say","drawQuestion","fade"],this.characters={},this.sayBox=document.getElementById("sayBox"),this.nameElem=document.getElementById("name"),this.textElem=document.getElementById("text"),this.globalIndex=0,this.localIndex=-1,this.click=function(){this.localIndex+=1,this.localIndex<this.elements[this.globalIndex].length&&(this.UI.clearQuestion(),this.UI.hideTextBox(),this.element=this.elements[this.globalIndex][this.localIndex],this.element.parent[this.element.func].apply(this.element.parent,this.element.arguments),this.notSkip.indexOf(this.element.func)===-1&&this.click())}.bind(this),this.clickListener=document.body.addEventListener("click",this.click)},Nauper.Engine.prototype.redirect=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.globalIndex=e,this.localIndex=t-1,this.UI.hideCharacters()},Nauper.Engine.prototype.addLabel=function(e){e.length>0&&this.elements.push(e)},Nauper.Engine.prototype.start=function(){this.click()};
"use strict";Nauper.Character=function(t,i,e,s,a,h){this.engine=t,this.emotions=i,this.name=e,this.color=a,this.id=s,this.pos=h,this.engine.characters[this.id]=this,this.characterPos={0:"characterPos0",1:"characterPos1",2:"characterPos2",3:"characterPos3",center:"characterPosCenter"},this.currentEmotion=!1,this.setPos=function(t){this.clearPos(),this.image.classList.add(this.characterPos[t]),this.pos=t}.bind(this),this.clearPos=function(){var t=this;Object.getOwnPropertyNames(this.characterPos).forEach(function(i){t.image.classList.remove(t.characterPos[i])}),this.pos=!1}.bind(this),this.say=function(t){this.engine.nameElem.style.color=this.color,this.engine.nameElem.innerHTML=this.name,this.engine.textElem.innerHTML=t,this.engine.UI.showTextBox()}.bind(this),this.createImage(),this.setPos.call(this,h)},Nauper.Character.prototype.createImage=function(){var t=void 0;this.image=document.createElement("img"),this.image.id=this.id,this.image.classList.add("character"),this.image.classList.add(t),this.image.style.display="none",document.body.appendChild(this.image)},Nauper.Character.prototype.draw=function(t){this.image.style.display="block",this.emotions[t]&&this.currentEmotion!==t&&(this.image.src=this.emotions[t],this.currentEmotion=t)},Nauper.Character.prototype.hide=function(){this.image.style.display="none",this.image.src="",this.currentEmotion=!1};